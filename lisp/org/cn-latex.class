\\documentclass[10pt,a4paper,titlepage]{article}
\\usepackage{graphicx}
\\usepackage[table,svgnames]{xcolor}
\\usepackage{xeCJK}
\\usepackage{lmodern}
\\usepackage{verbatim}
\\usepackage{fixltx2e}
\\usepackage{longtable}
\\usepackage{tabu}
\\usepackage{float}
\\usepackage{tikz}
\\usepackage{wrapfig}
\\usepackage{soul}
\\usepackage{textcomp}
\\usepackage{listings}
\\usepackage{geometry}
\\usepackage{algorithm}
\\usepackage{algorithmic}
\\usepackage{marvosym}
\\usepackage{wasysym}
\\usepackage{latexsym}
\\usepackage{natbib}
\\usepackage{array,tabularx}
\\usepackage[listings,skins,breakable]{tcolorbox}
\\usepackage[obeyspaces]{url}
\\tcbuselibrary{skins}
\\tcbuselibrary{hooks}
\\tcbuselibrary{breakable}
\\usepackage[xetex,colorlinks=true,CJKbookmarks=true,linkcolor=blue,urlcolor=blue,menucolor=blue]{hyperref}
\\usepackage{fontspec,xunicode,xltxtra}
\\usepackage{fancyhdr} %设置页眉页脚的宏包
\\usepackage{indentfirst}
\\usepackage{courier}
\\setmainfont[BoldFont=Arial]{Arial}
\\setsansfont[BoldFont=Arial]{Arial}
\\setmonofont{Andale Mono}
\\setCJKmainfont{PingFang SC}%中文字体
\\setCJKmonofont{PingFang SC}
\\hypersetup{unicode=true}
\\geometry{a4paper, textwidth=6.5in, textheight=10in,marginparsep=7pt, marginparwidth=.6in}
\\definecolor{codegreen}{rgb}{0,0.6,0}
\\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\\definecolor{codepurple}{rgb}{0.58,0,0.82}
\\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\\colorlet{punct}{red!60!black}
\\definecolor{background}{HTML}{EEEEEE}
\\definecolor{delim}{RGB}{20,105,176}
\\definecolor{bilipink}{RGB}{234,123,153}
\\definecolor{bilibluesub}{RGB}{168,215,234}
\\definecolor{biliblue}{RGB}{68,159,211}
\\definecolor{biligray}{RGB}{244,244,244}
\\colorlet{numb}{magenta!60!black}
\\punctstyle{kaiming}
\\tolerance=1000
\\fancyfoot[C]{\\bfseries\\thepage}
\\pagestyle{fancy}
\\newcommand\\JSONnumbervaluestyle{\\color{blue}}
\\newcommand\\JSONstringvaluestyle{\\color{red}}
\\definecolor{myblue}{RGB}{20,105,176}
% switch used as state variable
\\newif\\ifcolonfoundonthisline
\\makeatletter
\\lstdefinestyle{codestyle}
{
   backgroundcolor=\\color{backcolour},
    commentstyle=\\color{codegreen},
    keywordstyle=\\color{magenta},
    numberstyle=\\tiny\\color{codegray},
    stringstyle=\\color{codepurple},
    basicstyle=\\footnotesize\\ttfamily,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=4,
    frame=single,
    frameround=tttt,
    framerule=8pt,
    xrightmargin=4mm,
    xleftmargin=4mm}

% flip the switch if a colon is found in Pmode
\\newcommand\\processColon@codestyle{%
  \\colon@codestyle%
  \\ifnum\\lst@mode=\\lst@Pmode%
    \\global\\colonfoundonthislinetrue%
  \\fi
}

\\lst@AddToHook{Output}{%
  \\ifcolonfoundonthisline%
    \\ifnum\\lst@mode=\\lst@Pmode%
      \\def\\lst@thestyle{\\JSONnumbervaluestyle}%
    \\fi
  \\fi
  %override by keyword style if a keyword is detected!
  \\lsthk@DetectKeywords% 
}

% reset the switch at the end of line
\\lst@AddToHook{EOL}%
  {\\global\\colonfoundonthislinefalse}
\\makeatother

\\lstdefinelanguage{json}{ % support json
    keywords={false,true},
    alsoletter=0123456789.,
    morecomment=[l]//,
    morecomment=[s]{/*}{*/},
    morestring=[s]{"}{"},
    stringstyle=\\ifcolonfoundonthisline\\JSONstringvaluestyle\\fi,
    MoreSelectCharTable=\\lst@DefSaveDef{`:}\\colon@codestyle{\\processColon@codestyle},
    literate=
     *{:}{{{\\color{punct}{:}}}}{1}
      {,}{{{\\color{punct}{,}}}}{1}
      {\\{}{{{\\color{delim}{\\{}}}}{1}
      {\\}}{{{\\color{delim}{\\}}}}}{1}
      {[}{{{\\color{delim}{[}}}}{1}
      {]}{{{\\color{delim}{]}}}}{1},
}

\\lstdefinelanguage{yaml}{ % support yaml
    keywords={false,true},
    alsoletter=0123456789.,
    morecomment=[l]\\#,    
    morestring=[s]{"}{"},
}

\\lstdefinelanguage{nginx}{ % support nginx conf
    morekeywords={daemon,master_process,worker_processes,error_log,pid,events,accept_mutex,http,lua_package_path,init_by_lua_block,server,listen,location,rewrite,rewrite_by_lua_block,on,off,set},
    alsoletter=0123456789.,
    morecomment=[l]\\#,    
    morestring=[s]{"}{"},
}[keywords,comments,strings]

\\lstdefinelanguage{js}{ % support js
    morekeywords={typeof,new,true,false,catch,function,return,null,catch,switch,var,if,in,while,do,else,case,break},
    morecomment=[l]//,
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    morestring=[b]',
    }[keywords,comments,strings]
\\setlength\\arrayrulewidth{0.8pt}\\arrayrulecolor{MidnightBlue} % table line style

\\lstdefinelanguage{protobuf}{ % support protobuf
    morekeywords={double,float,int32,int64,uint32,uint64,sint32,sint64,fixed32,sfixed32,sfiex64,bool,string,bytes,messageType,enumType,map},
    morecomment=[l]//,
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    morestring=[b]',
    classoffset=1, % starting new class
    otherkeywords={message,required,optional,repeated,syntax,import,package,public,group},
    morekeywords={message,required,optional,repeated,syntax,import,package,public,group},
    keywordstyle=\\color{myblue},
    classoffset=0,
    }[keywords,comments,strings]

\\lstdefinelanguage{Golang}% support Golang
  {morekeywords=[1]{package,import,func,type,struct,return,defer,panic,%
     recover,select,var,const,iota,},%
   morekeywords=[2]{string,uint,uint8,uint16,uint32,uint64,int,int8,int16,%
     int32,int64,bool,float32,float64,complex64,complex128,byte,rune,uintptr,%
     error,interface},%
   morekeywords=[3]{map,slice,make,new,nil,len,cap,copy,close,true,false,%
     delete,append,real,imag,complex,chan,},%
   morekeywords=[4]{for,break,continue,range,goto,switch,case,fallthrough,if,%
     else,default,},%
   morekeywords=[5]{Println,Printf,Error,Print,},%
   sensitive=true,%
   morecomment=[l]{//},%
   morecomment=[s]{/*}{*/},%
   morestring=[b]',%
   morestring=[b]",%
   morestring=[s]{`}{`},%
   }   
\\setlength\\arrayrulewidth{0.8pt}\\arrayrulecolor{MidnightBlue} % table line style
%\\rowcolors{1}{Linen}{Beige} % table 行颜色设置

\\lstdefinelanguage{lua}% support lua
  {morekeywords=[1]{local,function,typeof,if,end,else,for,
     do,return,metatable,require,table,and,or,not,while,break,in,until,goto,repeat,true,false,then,elseif},
   sensitive=true,%
   morecomment=[l]{--},%
   morestring=[b]',%
   morestring=[b]",%
   morestring=[s]{`}{`},%
   }[keywords,comments,strings]

\\lstdefinelanguage{txt}% support text
  {sensitive=true,%
   morecomment=[l]\\#,    
   morestring=[b]',%
   morestring=[b]",%
   morestring=[s]{`}{`},%
   }[keywords,comments,strings]